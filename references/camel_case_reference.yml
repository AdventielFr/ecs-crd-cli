# Canary deployment definition
canary:
  group: string
  releases:
    blue: string
    green: string
  # Scale on start definition
  scale:
    desired: integer
    wait: integer
  # Strategy deployment definition
  strategy:
    - weight: integer
      wait: integer
# service definition
service:
  Project: string
  name: string
  cluster: string
  fqdn: string
  cpu: integer
  memory: integer
  pidMode: string
  ipcMode: string
  requiresCompatibilities:
    - string
  # Volume definition
  volumes:
    - name: string
      dockerVolumeConfiguration:
        autoprovision: string
        driver: string
        driverOpts:
          - keypair
      host:
        sourcePath: string
  # Container definition
  containers:
    - name: string
      image: nginx
      cpu: integer
      memory: integer
      memoryReservation: integer
      # Container port mappings definition
      portMappings:
        - hostPort: intger
          containerPort: integer
          protocol: string
        - hostPort: intger
          containerPort:
            blue: integer
            green: integer
          protocol: string
      entryPort:
        - string
      environment:
        - keypair
      secrets:
        - keypair
      command:
        - string
      dnsSearchDomains:
        - string
      disableNetworking: boolean
      dnsServers:
        - string
      links:
        - string
      dockerSecurityOptions:
        - string
      essential: boolean
      privileged: boolean
      hostname: string
      # Mount point definition
      mountPoints:
        - containerPath: string
          sourceVolume: string
          readOnly: boolean
      startTimeout: integer
      stopTimeout: integer
      dependsOn:
        - string
  # Iam service roles definition
  iamRoles:
    # Task execution role definition
    taskExecutionRole:
      - name: string
        effect: string
        actions:
          - string
        resources:
          - string
     # Task role definition
    taskRole:
      - name: string
        effect: string
        actions:
          - string
        resources:
          - string    
  # Auto scaling definition
  autoScaling:
    minCapacity: integer
    maxCapacity: integer
    roleArn: string
    # Step scaling policy definition
    stepScalingPolicyConfiguration:
      - name: string
        adjustmentType: string
        cooldown: integer
        metricAggregationType: string
        # Step ajustments definition
        stepAdjustments:
          - metricIntervalLowerBound: integer
            scalingAdjustment: integer
          - metricIntervalUpperBound: integer
            scalingAdjustment: integer
        # Cloudwatch alarms definition
        cloudwatchAlarms:
          - metricName: string
            alarmDescription: string
            namespace: string
            statistic: string
            period: integer
            evaluationPeriods: integer
            threshold: integer
            comparisonOperator: string
 # target group definition
targetGroups:
  - port: integer
    container:
      name: string
      port: integer
    targetGroupAttributes:
      - keypair
    protocol: string
    # Health Check definition
    healthCheck:
      path: string
      matcher: string
      intervalSeconds: integer
      healthyThresholdCount: integer
      unhealthyThresholdCount: integer
      protocol: string
# Listener definition
listeners:
  - port: integer
    protocol: string
    targetGroup:
      container:
        name: string
        port: integer
    # Rule definition
    rule:
      conditions:
        - field: string
          values:
            - string
    certificates:
      - string
